<!doctype html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<title>Frontend backend connector</title>
	<link rel="stylesheet" href="jquery-ui-1.12.1.custom\jquery-ui.css"/>
	<script src="jquery-ui-1.12.1.custom\	external\jquery\jquery.js"></script>
	<script src="jquery-ui-1.12.1.custom\jquery-ui.js"></script>
	<script>
	;(function() {
		"use strict";
			$( document ).ready( function() {
				var projectsArr=[];
				var currentProject;
				var Project=function (id,name,description){
					this.id=id;
					this.name=name;
					this.description=description;
					//add call
				}


//jQuery UI
				$( "#newProjectForm" ).dialog({
	      autoOpen: false,
				resizable: false,
				modal: true,
				title: "Dialog title",
	      show: {
	        effect: "blind",
	        duration: 1000
	      },
	      hide: {
	        effect: "explode",
	        duration: 1000
	      },
				buttons: {
        "Create project": function() {
          $( this ).dialog( "close" );
					//create code!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        },
        Cancel: function() {
          $( this ).dialog( "close" );
        }
      }
		}); //end dialog

			$(".wrapMainBlock").tooltip({
	      track: true
	    });
			$("#accProjects").accordion({
				heightStyle: "content"
			});
			$("#addProject").button();

//Projects editing




			 currentProject=new Project(4,"project4","Das projekt macht nichts, aber um so mehr ordentlich");

			$('#addProject').on('click', function(){

					$.ajax({
						url:'http://localhost:26893/projectsND',
						method:'post',
						//answer data from server:
						dataType: 'json',
						//sending data
						data:{dataObject:JSON.stringify(currentProject)},
						/*data:JSON.stringify(jsonRoot),*/
						success:function( data ){
							console.log("newProject answer on client, data object:");
							console.log(data);
							//return data;
						}
					}); //ajax //ajax
				$( "#newProjectForm" ).dialog( "open" );
			});

			//save new project to server

			var newProject = function(obj){
				console.log("newProject send");
				$.ajax({
					url:'http://localhost:26893/newProjectND',
					method:'post',
					//response data:
					//dataType: 'json',
					/*contentType:'application/json',*/
					//data:{dataObject:JSON.stringify(jsonRoot)},
					//sending data
					data:{dataObject:JSON.stringify(obj)},
					/*data:JSON.stringify(jsonRoot),*/
					success:function( data ){
						console.log("data back");
						console.log(data);
						//return data;
					}
				}); //ajax //ajax

			}


			var readData = function(){
				console.log("reading running");
				$.ajax({
					//url:'http://localhost:26893/getprojects',
					url:'http://localhost:26893/readprojects',
					method:'post',
					//dataType: 'json',
					/*contentType:'application/json',*/
					//data:{dataObject:JSON.stringify(jsonRoot)},
					//data:{dataObject:JSON.stringify(obj)},
					/*data:JSON.stringify(jsonRoot),*/
					success:function( data ){
						console.log("data read back");
						console.log(data);
						console.log(JSON.parse(data).id);
						console.log(JSON.parse(data));

						//return data;
					}
				}); //ajax //ajax
			} //saveData


			var saveData = function(obj){
				$.ajax({
					//url:'http://localhost:26893/getprojects',
					url:'http://localhost:26893/projects',
					method:'post',
					dataType: 'json',
					/*contentType:'application/json',*/
					//data:{dataObject:JSON.stringify(jsonRoot)},
					data:{dataObject:JSON.stringify(obj)},
					/*data:JSON.stringify(jsonRoot),*/
					success:function( data ){
						console.log("data back");
						console.log(data);
						//return data;
					}
				}); //ajax //ajax
			} //saveData
		}) //document ready
	}()); //outer-function
	</script>
	<style>
	body > div:first-of-type {
		padding:0;
		text-align: center;
	}

	.wrapMainBlock {
		margin: 5%;
		border-radius: 10px;
		padding: 10px;
		background: #F1F1F1;
		border: 1px solid #F6F1E6;
	}

	#addProject {
		margin: 20px 10px 0  0;
	}

	</style>
</head>
<body>
<div class="wrapMainBlock">
	<h2>Frontend to backend and back</h2>
</div>
<div class="wrapMainBlock">
	<div id="accProjects">
		<h3>default project</h3>
		<div>
				project template nr. 1
				project template nr. 1
				project template nr. 1
		</div>
		<h3>default project2</h3>
		<div>
				project template nr. 2
				project template nr. 2
				project template nr. 2
		</div>
		<button id="addProject" title="please add new project">new project</button>
	</div>

</div>

<div id="newProjectForm" title="Create new project">
  <p>body dialog</p>
</div>
</body>
</html>
