<!doctype html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<title>Frontend backend connector</title>
	<link rel="stylesheet" href="jquery-ui-1.12.1.custom\jquery-ui.css"/>

	<script src="jquery-ui-1.12.1.custom\	external\jquery\jquery.js"></script>

	<script src="jquery-ui-1.12.1.custom\jquery-ui.js"></script>
	<script>

	;(function() {
		"use strict";
			$( document ).ready( function() {
				$( "#newProjectForm" ).dialog({
	      autoOpen: false,
				resizable: false,
				modal: true,
				title: "Dialog title",

	      show: {
	        effect: "blind",
	        duration: 1000
	      },
	      hide: {
	        effect: "explode",
	        duration: 1000
	      },
				buttons: {
        "Create project": function() {
          $( this ).dialog( "close" );
					//create code!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        },
        Cancel: function() {
          $( this ).dialog( "close" );
        }
      }

	    });

			$(".wrapMainBlock").tooltip({
	      track: true
	    });
			$("#accProjects").accordion({
				heightStyle: "content"
			});
			$("#addProject").button();

			var projectsArr=[];

			var jsonRoot = {
				rootObject: projectsArr
			}

			var Project=function (name,description){
				this.name=name;
				this.description=description;
				//add call
			}

			jsonRoot.rootObject[0]=new Project("project1","Das projekt macht nichts, aber um so mehr ordentlich");


			console.log(jsonRoot.rootObject[0]);
			$('#addProject').on('click', function(){
				var nextProject=jsonRoot.rootObject.length;
				jsonRoot.rootObject[nextProject]=new Project("project2","Das projekt2 macht nichts, aber um so mehr ordentlich");
				console.log(jsonRoot);
				console.log("servus1");
				console.log( {dataObject:JSON.stringify(jsonRoot)} );
				$.ajax({

					//url:'http://localhost:26893/getprojects',
					url:'http://localhost:26893/getprojects',
					method:'post',
					dataType: 'json',
					/*contentType:'application/json',*/
					data:{dataObject:JSON.stringify(jsonRoot)},
					/*data:JSON.stringify(jsonRoot),*/
					success:function( data ){
						console.log("servus2");
						console.log("data back: " + data);
						//return data;
					}
				}); //ajax



				//saveData(jsonRoot);
				$( "#newProjectForm" ).dialog( "open" );
			});

			var saveData = function(obj){
				$.ajax({

			    url:'http://localhost:26893/getprojects',
			    method:'post',
					datatype: 'json',
					/*contentType:'json',*/
			    data:obj,

			    success:function( data ){

			      console.log("data back: " + data);
						return data;
			    }
			  }); //ajax
			} //saveData
		}) //document ready
	}()); //outer-function
	</script>
	<style>
	body > div:first-of-type {
		padding:0;
		text-align: center;
	}

	.wrapMainBlock {
		margin: 5%;
		border-radius: 10px;
		padding: 10px;
		background: #F1F1F1;
		border: 1px solid #F6F1E6;
	}

	#addProject {
		margin: 20px 10px 0  0;
	}

	</style>
</head>
<body>
<div class="wrapMainBlock">
	<h2>Frontend to backend and back</h2>
</div>
<div class="wrapMainBlock">
	<div id="accProjects">
		<h3>default project</h3>
		<div>
				project template nr. 1
				project template nr. 1
				project template nr. 1
		</div>
		<h3>default project2</h3>
		<div>
				project template nr. 2
				project template nr. 2
				project template nr. 2
		</div>
		<button id="addProject" title="please add new project">new project</button>
	</div>

</div>

<div id="newProjectForm" title="Create new project">
  <p>body dialog</p>
</div>
</body>
</html>
